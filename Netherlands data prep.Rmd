---
title: "Untitled"
author: "Menta MÃ³ra"
date: "2024-05-07"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

df <- Dutch.energie.communities_cumulative
df2 <- Netherlands.agricultural.coops

library(lubridate)
df2$date <- dmy(df2$Date)

df2$year <- as.integer(year(df2$date))

df2 <- df2 %>%
  group_by(year) %>%
  mutate(agri_coop_count = n())

df2 <- distinct(df2, year, .keep_all = TRUE)
df2 <- df2 %>% arrange(year)

df$year <- df$Year
df$ec_count <- df$EC_nzmber

merged <- merge(df, df2, by = "year", all = TRUE)

merged <- select(merged, year, ec_count, agri_coop_count)

merged$ec_count[is.na(merged$ec_count)] <- 0
merged$agri_coop_count[is.na(merged$agri_coop_count)] <- 0

ggplot(merged) +
  geom_line(aes(x = year,
                y = ec_count), linetype = "solid") +
  geom_line(aes(x = year,
                y = agri_coop_count), linetype = "dashed") +
  geom_vline(xintercept = 1989,
             linetype = "dotted")
